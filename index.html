<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë ˆì¡°ë„ŒìŠ¤ ì •ë³´ ì‚¬ì´íŠ¸</title>
  <style>
    /* ê¸°ë³¸ ì„¤ì • */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Pretendard', sans-serif;
    }

    body {
      background-color: #f5f5f5;
      color: #333;
      display: flex;
      min-height: 100vh;
    }

    /* ì‚¬ì´ë“œë°” */
    .sidebar {
      width: 200px;
      background-color: #2c3e50;
      color: white;
      padding: 20px 0;
      flex-shrink: 0;
    }

    .sidebar-header {
      padding: 0 15px 15px;
      border-bottom: 1px solid #34495e;
      margin-bottom: 15px;
    }

    .sidebar-menu {
      list-style: none;
    }

    .sidebar-menu li a {
      display: block;
      padding: 10px 15px;
      color: #ecf0f1;
      transition: all 0.3s;
      cursor: pointer;
    }

    .sidebar-menu li a:hover {
      background-color: #34495e;
    }

    .sidebar-menu li.active a {
      background-color: #34495e;
      color: #4a8fe7;
      border-left: 3px solid #4a8fe7;
    }

    .sidebar-menu li a i {
      margin-right: 10px;
    }

    /* ë©”ì¸ ì»¨í…ì¸  */
    .main-content {
      flex-grow: 1;
      padding: 20px;
    }

    /* ê²€ìƒ‰ì°½ ìŠ¤íƒ€ì¼ */
    .search-container {
      margin: 20px 0;
      position: relative;
    }

    #item-search {
      width: 100%;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }

    #item-search:focus {
      outline: none;
      border-color: #4a8fe7;
      box-shadow: 0 0 0 2px rgba(74, 143, 231, 0.2);
    }

    .search-icon {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #999;
    }

    /* í˜ì´ì§€ ì»¨í…ì¸  */
    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    /* ê°€ê²© í…Œì´ë¸” */
    .price-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-top: 10px;
    }

    .price-table th, .price-table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }

    .price-table th {
      background-color: #2c3e50;
      color: white;
      font-weight: 500;
    }

    .price-table tr:hover {
      background-color: #f9f9f9;
    }

    .no-results {
      text-align: center;
      padding: 20px;
      color: #777;
      display: none;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        height: auto;
      }
      .sidebar-menu {
        display: flex;
        overflow-x: auto;
      }
      .sidebar-menu li {
        flex: 0 0 auto;
      }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- ì‚¬ì´ë“œë°” -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h3>ë ˆì¡°ë„ŒìŠ¤ ì •ë³´</h3>
    </div>
    <ul class="sidebar-menu">
      <li class="active" data-page="price"><a><i class="fas fa-scroll"></i>ìœ ì¡°ì´ íŒ¨ì¹˜ ì‹œê°„</a></li>
      <li data-page="calculator"><a><i class="fas fa-calculator"></i>ê°•í™” ê³„ì‚°ê¸°</a></li>
      <li data-page="character"><a><i class="fa-solid fa-user-group"></i>ìºë¦­í„° ì •ë³´</a></li>
    </ul>
  </div>

  <script src="https://kit.fontawesome.com/160862834c.js" crossorigin="anonymous"></script>

  <!-- ë©”ì¸ ì»¨í…ì¸  -->
  <div class="main-content">
    <!-- íŒ¨ì¹˜ ì •ë³´ í˜ì´ì§€ -->
    <div id="price" class="page active">
      <h1>ìœ ì¡°ì´ íŒ¨ì¹˜ ì‹œê°„</h1>
      
      <!-- ê²€ìƒ‰ì°½ ì¶”ê°€ -->
      <div class="search-container">
        <input type="text" id="item-search" placeholder="ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰...">
        <i class="fas fa-search search-icon"></i>
      </div>
      
      <div class="no-results">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
      
      <table class="price-table">
        <thead>
          <tr>
            <th>ì œëª©</th>
            <th>ê¸°ê°„</th>
            <th>ì‚¬ì´íŠ¸</th>
          </tr>
        </thead>
        <tbody id="price-table-body">
          <tr>
            <td>- 4ì›” 9ì¼ ë¦¬ì†ŒìŠ¤ ì—…ë°ì´íŠ¸ ì•ˆë‚´ -</td>
            <td>2025 - 04 / 09 15:25</td>
            <td><a href="https://game.naver.com/lounge/RES/board/detail/5867287" class="price-link" target="_blank">ì‚¬ì´íŠ¸ ì´ë™</a></td>
          </tr>
          <tr>
            <td>í–‡ì‚´ì´ ë¹„ì¹˜ëŠ” ê³³ğŸŒì‹œì¦ˆë£¨Â·ì—¬ë¦„ ë°”ìº‰ìŠ¤ ë“±ì¥!</td>
            <td>2025 - 04 / 09 16:04 </td>
            <td><a href="https://game.naver.com/lounge/RES/board/detail/5867476" class="price-link" target="_blank">ì‚¬ì´íŠ¸ ì´ë™</a></td>
          </tr>
          <tr>
            <td>í–‡ì‚´ì´ ë¹„ì¹˜ëŠ” ê³³ğŸŒì‹œì¦ˆë£¨Â·ì—¬ë¦„ ë°”ìº‰ìŠ¤ PV</td>
            <td>2025 - 04 / 09 16:17</td>
            <td><a href="https://game.naver.com/lounge/RES/board/detail/5867547" class="price-link" target="_blank">ì‚¬ì´íŠ¸ ì´ë™</a></td>
          </tr>
          <tr>
            <td style="color:#2ecc71">- 4ì›” 9ì¼ ë¦¬ì†ŒìŠ¤ ì—…ë°ì´íŠ¸ ì™„ë£Œ -</td>
            <td>2025 - 04 / 09 22:31</td>
          </tr>
          <tr>
            <td>- 4ì›” 10ì¼ ë¦¬ì†ŒìŠ¤ ì—…ë°ì´íŠ¸ ì•ˆë‚´ -</td>
            <td>2025 - 04 / 10 17:17</td>
            <td><a href="https://game.naver.com/lounge/RES/board/detail/5872209" class="price-link" target="_blank">ì‚¬ì´íŠ¸ ì´ë™</a></td>
          </tr>
          <tr>
            <td style="color:#2ecc71">- 4ì›” 10ì¼ ë¦¬ì†ŒìŠ¤ ì—…ë°ì´íŠ¸ ì™„ë£Œ -</td>
            <td>2025 - 04 / 10 21:08</td>
          </tr>
          <tr>
            <td>[ê¸ˆí† ì¼, ê²Œì„ê³¼ í•¨ê»˜í•  ì‹œê°„] ì›ìŠ¤í† ì–´ í”„ë¡œëª¨ì…˜ ì•ˆë‚´</td>
            <td>2025 - 04 / 11 01:12</td>
            <td><a href="https://game.naver.com/lounge/RES/board/detail/5874441" class="price-link" target="_blank">ì‚¬ì´íŠ¸ ì´ë™</a></td>
          </tr>
          <tr>
            <td><ë³¸ê²©ì‚¬studio>X<ë ˆì¡°ë„ŒìŠ¤> ì˜ìƒ ê³µê°œ ì•ˆë‚´ </td>
            <td>2025 - 04 / 11 11:44</td>
            <td><a href="https://game.naver.com/lounge/RES/board/detail/5875542" class="price-link" target="_blank">ì‚¬ì´íŠ¸ ì´ë™</a></td>
          </tr>
          <tr>
            <td><ëŸ¬ë¼>X<ë ˆì¡°ë„ŒìŠ¤> ì˜ìƒ ê³µê°œ ì•ˆë‚´</td>
            <td>2025 - 04 / 14 20:28</td>
            <td><a href="https://game.naver.com/lounge/RES/board/detail/5889067" class="price-link" target="_blank">ì‚¬ì´íŠ¸ ì´ë™</a></td>
          </tr>
          <tr>
            <td><ê°‘ì² ì„±ì˜ ì¹´ë°”ë„¤ë¦¬>Ã—<ë ˆì¡°ë„ŒìŠ¤> ì½œë¼ë³´ ìŠ¹ë¬´ì› ê³µê°œ_ë¬´ë©”ì´</td>
            <td>2025 - 04 / 15 11:46</td>
            <td><a href="https://game.naver.com/lounge/RES/board/detail/5891198" class="price-link" target="_blank">ì‚¬ì´íŠ¸ ì´ë™</a></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ê°•í™” ê³„ì‚°ê¸° í˜ì´ì§€ -->
    <div id="calculator" class="page">
      <h1>ê°•í™” ê³„ì‚°ê¸°</h1>
      <div class="calculator-container">
        <div class="input-section">
          <!-- ì•„ì´í…œ ë“±ê¸‰ ì„ íƒ -->
          <div class="input-group">
            <label for="item-grade">ì•„ì´í…œ ë“±ê¸‰:</label>
            <select id="item-grade" class="enhance-select">
              <option value="UR">UR</option>
              <option value="SSR">SSR</option>
              <option value="SR" selected>SR</option>
              <option value="R">R</option>
            </select>
          </div>  
          
          <div style="position: absolute; top: 10px; right: 20px;">
            <a href="https://wiki.biligame.com/resonance/%E8%A3%85%E5%A4%87%E5%8D%87%E7%BA%A7%E6%89%80%E9%9C%80%E7%BB%8F%E9%AA%8C%E8%A1%A8" target="_blank" style="font-size: 0.9rem; color: #007bff; text-decoration: none;">
              ğŸ”— ì°¸ê³  ìë£Œ
            </a>
          </div>
          
            
          
          <!-- ì•„ì´í…œ ìœ í˜• ì„ íƒ -->
          <div class="input-group">
            <label for="item-type">ì•„ì´í…œ ìœ í˜•:</label>
            <select id="item-type" class="enhance-select">
              <option value="weapon">ë¬´ê¸°/ë°©ì–´êµ¬</option>
              <option value="accessory">ì•…ì„¸ì„œë¦¬</option>
            </select>
          </div>
          
          <!-- í˜„ì¬ ê°•í™” ë‹¨ê³„ -->
          <div class="input-group">
            <label for="current-level">í˜„ì¬ ê°•í™” ë‹¨ê³„:</label>
            <input 
              type="number" 
              id="current-level" 
              class="number-input" 
              value="1" 
              min="1" 
              max="69"
            >
          </div>
          
          <!-- ëª©í‘œ ê°•í™” ë‹¨ê³„ -->
          <div class="input-group">
            <label for="target-level">ëª©í‘œ ê°•í™” ë‹¨ê³„:</label>
            <input 
              type="number" 
              id="target-level" 
              class="number-input" 
              value="2" 
              min="2" 
              max="70"
            >
          </div>
        </div>
        
        <!-- ê³„ì‚° ë²„íŠ¼ -->
        <button id="calculate-btn" class="calculate-button">ê³„ì‚°í•˜ê¸°</button>
        
        <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
        <div id="result-section" class="result-section" style="display:none;">
          <h3>ê³„ì‚° ê²°ê³¼</h3>
          <div class="result-grid">
            <div class="result-item">
              <span>í•„ìš” ê²½í—˜ì¹˜:</span>
              <span id="exp-result">0</span>
            </div>
            <div class="result-item">
              <span>í•„ìš” ê³¨ë“œ:</span>
              <span id="gold-result">0</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <style>
      .calculator-container {
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        max-width: 600px;
        margin: 0 auto;
      }
      
      .input-group {
        margin-bottom: 15px;
        display: flex;
        align-items: center;
      }
      
      .input-group label {
        width: 150px;
        font-weight: bold;
        flex-shrink: 0;
      }
      
      .number-input, .enhance-select {
        width: 180px;
        height: 35px;
        padding: 5px 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
      }
      
      /* ë“±ê¸‰ë³„ ìƒ‰ìƒ */
      #item-grade option[value="UR"] { color: #f36009; font-weight: bold; }
      #item-grade option[value="SSR"] { color: #fdc116; font-weight: bold; }
      #item-grade option[value="SR"] { color: #9a26e2; }
      #item-grade option[value="R"] { color: #276ef0; }
      
      .calculate-button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 12px;
        width: 100%;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 15px;
        transition: background-color 0.3s;
      }
      
      .calculate-button:hover {
        background-color: #45a049;
      }
      
      .result-section {
        margin-top: 20px;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 5px;
      }
      
      .result-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }
      
      .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
    </style>
    
    <script>
      // ë“±ê¸‰ë³„ ê²½í—˜ì¹˜ ë°ì´í„° (ë ˆë²¨ 1ë¶€í„° ì‹œì‘í•˜ë„ë¡ ì¸ë±ìŠ¤ ì¡°ì •)
      const expData = {
        "UR": {
          "weapon": [100,200,300,400,500,600,700,800,900,1000,1200,1400,1600,1800,2000,2200,2400,2600,2800,3000,3400,3800,4200,4600,5000,5400,5800,6200,6600,7000,8000,9000,10000,11000,12000,13000,14000,15000,16000,17000,19000,21000,23000,25000,27000,29000,31000,33000,35000,37000,41000,45000,49000,53000,57000,61000,65000,69000,73000,77000,81000,85000,89000,93000,97000,101000,105000,109000,113000],
          "accessory": [150,300,450,600,750,900,1050,1200,1350,1500,1800,2100,2400,2700,3000,3300,3600,3900,4200,4500,5100,5700,6300,6900,7500,8100,8700,9300,9900,10500,12000,13500,15000,16500,18000,19500,21000,22500,24000,25500,28500,31500,34500,37500,40500,43500,46500,49500,52500,55500,61500,67500,73500,79500,85500,91500,97500,103500,109500,115500,121500,127500,133500,139500,145500,151500,157500,163500,169500]
        },
        "SSR": {
          "weapon": [65,110,165,220,275,330,385,440,495,550,660,770,880,990,1100,1210,1320,1430,1540,1650,1870,2090,2310,2530,2750,2970,3190,3410,3630,3850,4400,4950,5500,6050,6600,7150,7700,8250,8800,9350,10450,11550,12650,13750,14850,15950,17050,18150,19250,20350,22550,24750,26950,29150,31350,33550,35750,37950,40150,42350,44550,46750,48950,51150,53350,55550,57750,59950,62150],
          "accessory": [97,165,247,330,412,495,577,660,742,825,990,1155,1320,1485,1650,1815,1980,2145,2310,2475,2805,3135,3465,3795,4125,4455,4785,5115,5445,5775,6600,7425,8250,9075,9900,10725,11550,12375,13200,14025,15675,17325,18975,20625,22275,23925,25575,27225,28875,30525,33825,37125,40425,43725,47025,50325,53625,56925,60225,63525,66825,70125,73425,76725,80025,83325,86625,89925,93225]
        },
        "SR": {
          "weapon": [40,70,105,140,175,210,245,280,315,350,420,490,560,630,700,770,840,910,980,1050,1190,1330,1470,1610,1750,1890,2030,2170,2310,2450,2800,3150,3500,3850,4200,4550,4900,5250,5600,5950,6650,7350,8050,8750,9450,10150,10850,11550,12250,12950,14350,15750,17150,18550,19950,21350,22750,24150,25550,26950,28350,29750,31150,32550,33950,35350,36750,38150,39550],
          "accessory": [60,105,157,210,262,315,367,420,472,525,630,735,840,945,1050,1155,1260,1365,1470,1575,1785,1995,2205,2415,2625,2835,3045,3255,3465,3675,4200,4725,5250,5775,6300,6825,7350,7875,8400,8925,9975,11025,12075,13125,14175,15225,16275,17325,18375,19425,21525,23625,25725,27825,29925,32025,34125,36225,38325,40425,42525,44625,46725,48825,50925,53025,55125,57225,59325]
        },
        "R": {
          "weapon": [25,50,75,100,125,150,175,200,225,250,300,350,400,450,500,550,600,650,700,750,850,950,1050,1150,1250,1350,1450,1550,1650,1750,2000,2250,2500,2750,3000,3250,3500,3750,4000,4250,4750,5250,5750,6250,6750,7250,7750,8250,8750,9250,10250,11250,12250,13250,14250,15250,16250,17250,18250,19250,20250,21250,22250,23250,24250,25250,26250,27250,28250],
          "accessory": [37,75,112,150,187,225,262,300,337,375,450,525,600,675,750,825,900,975,1050,11250,12750,14250,15750,17250,18750,20250,21750,23250,24750,26250,30000,33750,37500,41250,45000,48750,52500,56250,60000,63750,71250,78750,86250,93750,101250,108750,116250,123750,131250,138750,153750,168750,183750,198750,213750,228750,243750,258750,273750,288750,303750,318750,333750,348750,363750,378750,393750,408750,423750]
        }
      };
    
      // ë“±ê¸‰ë³„ ê³¨ë“œ ë°ì´í„° (ë ˆë²¨ 1ë¶€í„° ì‹œì‘í•˜ë„ë¡ ì¸ë±ìŠ¤ ì¡°ì •)
      const goldData = {
        "UR": {
          "weapon": [1000,2000,3000,4000,5000,6000,7000,8000,9000,10000,12000,14000,16000,18000,20000,22000,24000,26000,28000,30000,34000,38000,42000,46000,50000,54000,58000,62000,66000,70000,80000,90000,100000,110000,120000,130000,140000,150000,160000,170000,190000,210000,230000,250000,270000,290000,310000,330000,350000,370000,410000,450000,490000,530000,570000,610000,650000,690000,730000,770000,810000,850000,890000,930000,970000,1010000,1050000,1090000,1130000],
          "accessory": [1500,3000,4500,6000,7500,9000,10500,12000,13500,15000,18000,21000,24000,27000,30000,33000,36000,39000,42000,45000,51000,57000,63000,69000,75000,81000,87000,93000,99000,105000,120000,135000,150000,165000,180000,195000,210000,225000,240000,255000,285000,315000,345000,375000,405000,435000,465000,495000,525000,555000,615000,675000,735000,795000,855000,915000,975000,1035000,1095000,1155000,1215000,1275000,1335000,1395000,1455000,1515000,1575000,1635000,1695000]
        },
        "SSR": {
          "weapon": [650,1100,1650,2200,2750,3300,3850,4400,4950,5500,6600,7700,8800,9900,11000,12100,13200,14300,15400,16500,18700,20900,23100,25300,27500,29700,31900,34100,36300,38500,44000,49500,55000,60500,66000,71500,77000,82500,88000,93500,104500,115500,126500,137500,148500,159500,170500,181500,192500,203500,225500,247500,269500,291500,313500,335500,357500,379500,401500,423500,445500,467500,489500,511500,533500,555500,577500,599500,621500],
          "accessory": [975,1650,2475,3300,4125,4950,5775,6600,7425,8250,9900,11550,13200,14850,16500,18150,19800,21450,23100,24750,28050,31350,34650,37950,41250,44550,47850,51150,54450,57750,66000,74250,82500,90750,99000,107250,115500,123750,132000,140250,156750,173250,189750,206250,222750,239250,255750,272250,288750,305250,338250,371250,404250,437250,470250,503250,536250,569250,602250,635250,668250,701250,734250,767250,800250,833250,866250,899250,932250]
        },
        "SR": {
          "weapon": [400,700,1050,1400,1750,2100,2450,2800,3150,3500,4200,4900,5600,6300,7000,7700,8400,9100,9800,10500,11900,13300,14700,16100,17500,18900,20300,21700,23100,24500,28000,31500,35000,38500,42000,45500,49000,52500,56000,59500,66500,73500,80500,87500,94500,101500,108500,115500,122500,129500,143500,157500,171500,185500,199500,213500,227500,241500,255500,269500,283500,297500,311500,325500,339500,353500,367500,381500,395500],
          "accessory": [600,1050,1575,2100,2625,3150,3675,4200,4725,5250,6300,7350,8400,9450,10500,11550,12600,13650,14700,15750,17850,19950,22050,24150,26250,28350,30450,32550,34650,36750,42000,47250,52500,57750,63000,68250,73500,78750,84000,89250,99750,110250,120750,131250,141750,152250,162750,173250,183750,194250,215250,236250,257250,278250,299250,320250,341250,362250,383250,404250,425250,446250,467250,488250,509250,530250,551250,572250,593250]
        },
        "R": {
          "weapon": [250,500,750,1000,1250,1500,1750,2000,2250,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8500,9500,10500,11500,12500,13500,14500,15500,16500,17500,20000,22500,25000,27500,30000,32500,35000,37500,40000,42500,47500,52500,57500,62500,67500,72500,77500,82500,87500,92500,102500,112500,122500,132500,142500,152500,162500,172500,182500,192500,202500,212500,222500,232500,242500,252500,262500,272500,282500],
          "accessory": [375,750,1125,1500,1875,2250,2625,3000,3375,3750,4500,5250,6000,6750,7500,8250,9000,9750,10500,11250,12750,14250,15750,17250,18750,20250,21750,23250,24750,26250,30000,33750,37500,41250,45000,48750,52500,56250,60000,63750,71250,78750,86250,93750,101250,108750,116250,123750,131250,138750,153750,168750,183750,198750,213750,228750,243750,258750,273750,288750,303750,318750,333750,348750,363750,378750,393750,408750,423750]
        }
      };
    
      // ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì‚¬
      function validateLevels() {
        const current = parseInt(document.getElementById('current-level').value) || 1;
        const target = parseInt(document.getElementById('target-level').value) || 2;
        
        // ë²”ìœ„ ê°•ì œ ì ìš©
        const validatedCurrent = Math.max(1, Math.min(69, current));
        const validatedTarget = Math.max(2, Math.min(70, target));
        
        document.getElementById('current-level').value = validatedCurrent;
        document.getElementById('target-level').value = Math.max(validatedTarget, validatedCurrent + 1);
      }
    
      // ê³„ì‚° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
      document.getElementById('calculate-btn').addEventListener('click', function() {
        validateLevels();
        
        const currentLevel = parseInt(document.getElementById('current-level').value);
        const targetLevel = parseInt(document.getElementById('target-level').value);
        const itemGrade = document.getElementById('item-grade').value;
        const itemType = document.getElementById('item-type').value;
        
        // ìœ íš¨ì„± ê²€ì‚¬
        if (currentLevel >= targetLevel) {
          alert("ëª©í‘œ ê°•í™” ë‹¨ê³„ëŠ” í˜„ì¬ ë‹¨ê³„ë³´ë‹¤ ë†’ì•„ì•¼ í•©ë‹ˆë‹¤.");
          return;
        }
        
        // ì´ í•„ìš” ê²½í—˜ì¹˜/ê³¨ë“œ ê³„ì‚° (ë ˆë²¨ 1ë¶€í„° ì‹œì‘í•˜ë„ë¡ ì¸ë±ìŠ¤ ì¡°ì •)
        let totalExp = 0;
        let totalGold = 0;
        
        for (let i = currentLevel - 1; i < targetLevel - 1; i++) {
          totalExp += expData[itemGrade][itemType][i];
          totalGold += goldData[itemGrade][itemType][i];
        }
        
        // ê²°ê³¼ í‘œì‹œ
        document.getElementById('exp-result').textContent = totalExp.toLocaleString();
        document.getElementById('gold-result').textContent = totalGold.toLocaleString();
        
        document.getElementById('result-section').style.display = 'block';
      });
    
      // ì…ë ¥ê°’ ë³€ê²½ ì‹œ ìœ íš¨ì„± ê²€ì‚¬
      document.getElementById('current-level').addEventListener('change', validateLevels);
      document.getElementById('target-level').addEventListener('change', validateLevels);

    </script>

<!-- ìºë¦­í„° ì •ë³´ ì •ë¦¬ -->
<head>
  <div id="character" class="page">
    <h1>ìºë¦­í„° ì •ë³´</h1>
    <div class="character-container">
      <div class="input-section"> 
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f5f5f5; color: #333; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        h1 { text-align: center; margin: 20px 0; color: #2c3e50; }
        
        /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
        #input-form { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], 
        select, 
        textarea { 
            width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; 
            font-family: inherit; font-size: 16px;
        }
        textarea { min-height: 100px; resize: vertical; }
        .form-row { display: flex; gap: 15px; }
        .form-row .form-group { flex: 1; }
        button { 
            background: #3498db; color: white; border: none; padding: 12px 20px; 
            border-radius: 4px; cursor: pointer; font-size: 16px; transition: background 0.3s;
            margin-right: 10px;
        }
        button:hover { background: #2980b9; }
        .edit-btn { background: #f39c12; }
        .edit-btn:hover { background: #e67e22; }
        .delete-btn { background: #e74c3c; }
        .delete-btn:hover { background: #c0392b; }
        .export-btn { background: #9b59b6; }
        .export-btn:hover { background: #8e44ad; }
        
        /* ìºë¦­í„° ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        #character-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .character-card { 
            background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 10px rgba(0,0,0,0.1); 
            transition: transform 0.3s, box-shadow 0.3s; cursor: pointer;
            position: relative;
        }
        .character-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .card-image { width: 100%; height: 250px; object-fit: cover; object-position: top center; }
        .card-body { padding: 15px; }
        .card-title { font-size: 18px; margin-bottom: 5px; color: #2c3e50; }
        .card-meta { font-size: 14px; color: #7f8c8d; margin-bottom: 10px; }
        .card-desc { font-size: 14px; color: #555; display: -webkit-box; -webkit-line-clamp-: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .card-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            z-index: 10;
        }
        .card-handle {
            background: rgba(52, 152, 219, 0.8);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: move;
        }
        .action-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            cursor: pointer;
        }
        .no-image { background:#eee; height:250px; display:flex; align-items:center; justify-content:center; color:#999; }
        
        /* ìƒì„¸ ë³´ê¸° ìŠ¤íƒ€ì¼ */
        #character-detail { display: none; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 3px 20px rgba(0,0,0,0.1); }
        .detail-header { display: flex; gap: 30px; margin-bottom: 20px; }
        .detail-image { width: 350px; height: 350px; object-fit: cover; object-position: top center; border-radius: 8px; }
        .detail-info { flex: 1; }
        .detail-name { font-size: 28px; margin-bottom: 10px; color: #2c3e50; }
        .detail-meta { display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }
        .detail-meta span { background: #ecf0f1; padding: 5px 10px; border-radius: 4px; font-size: 14px; }
        .detail-section { margin-bottom: 20px; }
        .detail-section h3 { border-bottom: 2px solid #3498db; padding-bottom: 5px; margin-bottom: 10px; color: #2c3e50; }
        .back-button { margin-top: 20px; background: #7f8c8d; }
        .back-button:hover { background: #95a5a6; }
        
        /* ì…ë ¥ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .input-section { 
            margin-bottom: 15px; padding: 10px; 
            border: 1px dashed #ccc; border-radius: 5px;
            position: relative;
        }
        .input-section textarea { margin-bottom: 5px; }
        .remove-section-btn { 
            background: #e74c3c; color: white; border: none; padding: 5px 10px; 
            border-radius: 3px; cursor: pointer; font-size: 12px;
        }
        .remove-section-btn:hover { background: #c0392b; }
        .section-handle {
            background: #3498db; color: white; 
            padding: 2px 8px; border-radius: 3px;
            cursor: move; font-size: 12px;
            margin-right: 5px;
        }
        .section-controls { margin-top: 5px; }
        .add-section-btn { background: #2ecc71; margin-top: 10px; }
        .add-section-btn:hover { background: #27ae60; }
        
        /* ìƒì„¸ ë³´ê¸° ì•„ì´í…œ ìŠ¤íƒ€ì¼ */
        .detail-item { margin-bottom: 15px; }
        .detail-item h4 { color: #3498db; margin-bottom: 5px; }
        
        /* ë“œë˜ê·¸ ì¤‘ì¸ ìš”ì†Œ ìŠ¤íƒ€ì¼ */
        .dragging {
            opacity: 0.5;
            border: 2px dashed #3498db;
        }
        
        /* ìˆ˜ì • ëª¨ë“œ ìˆ¨ê¸°ê¸° í´ë˜ìŠ¤ */
        .edit-mode-hidden {
            display: none !important;
        }
        
        /* ë°ì´í„° ë‚´ë³´ë‚´ê¸° ë²„íŠ¼ */
        .export-controls {
            text-align: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ì…ë ¥ í¼ -->
        <div id="input-form">
            <h1>ìƒˆ ìºë¦­í„° ì¶”ê°€/ìˆ˜ì •</h1>
            <form id="character-form" onsubmit="saveCharacter(event)">
                <input type="hidden" id="edit-id" value="">
                <div class="form-row">
                    <div class="form-group">
                        <label>ìºë¦­í„° ì´ë¦„</label>
                        <input type="text" id="char-name" required>
                    </div>
                    <div class="form-group">
                        <label>ì¢…ì¡±</label>
                        <select id="char-race" required>
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="human">ì¸ê°„</option>
                            <option value="machine">ê¸°ê³„</option>
                            <option value="nonhuman">ì¸ì™¸</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>ìƒì¼</label>
                        <input type="text" id="char-birth" placeholder="ì˜ˆ: 01/01">
                    </div>
                    <div class="form-group">
                        <label>ì„±ë³„</label>
                        <select id="char-gender">
                            <option value="unknown">ë¯¸ì •</option>
                            <option value="male">ë‚¨ì„±</option>
                            <option value="female">ì—¬ì„±</option>
                            <option value="other">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>í‚¤</label>
                        <input type="text" id="char-height" placeholder="ìºë¦­í„°ì˜ í‚¤">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>ìŠ¹ë¬´ì› ì •ë³´</label>
                    <div id="trait-sections">
                        <div class="input-section">
                            <textarea class="trait-text" placeholder="ìŠ¹ë¬´ì›ì˜ ì •ë³´ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
                            <div class="section-controls">
                                <span class="section-handle">â‰¡</span>
                                <button type="button" class="remove-section-btn" onclick="removeSection(this, 'trait')">ì‚­ì œ</button>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="add-section-btn" onclick="addSection('trait')">ìƒˆ ì •ë³´ ì¶”ê°€</button>
                </div>
                
                <div class="form-group">
                    <label>ë°°ê²½ ì´ì•¼ê¸°</label>
                    <div id="backstory-sections">
                        <div class="input-section">
                            <textarea class="backstory-text" placeholder="ìºë¦­í„°ì˜ ë°°ê²½ ì´ì•¼ê¸°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
                            <div class="section-controls">
                                <span class="section-handle">â‰¡</span>
                                <button type="button" class="remove-section-btn" onclick="removeSection(this, 'backstory')">ì‚­ì œ</button>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="add-section-btn" onclick="addSection('backstory')">ìƒˆ ì´ì•¼ê¸° ì¶”ê°€</button>
                </div>
                
                <div class="form-group">
                    <label>ì‚¬ì§„ ì—…ë¡œë“œ</label>
                    <input type="file" id="char-image" accept="image/*">
                    <div id="image-preview" style="margin-top: 10px;"></div>
                </div>
                
                <button type="submit" id="save-btn">ìºë¦­í„° ì €ì¥</button>
                <button type="button" id="cancel-edit" class="edit-mode-hidden" onclick="cancelEdit()">ìˆ˜ì • ì·¨ì†Œ</button>
            </form>
        </div>

        <!-- ë°ì´í„° ê´€ë¦¬ ì„¹ì…˜ -->
        <div class="export-controls">
            <button onclick="exportData()" class="export-btn">ğŸ“ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
            <button onclick="importData()" class="export-btn">ğŸ“‚ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
            <button onclick="saveForReadOnly()" class="export-btn">ğŸ’¾ ì½ê¸°ì „ìš©ìš© ì €ì¥</button>
        </div>
        
        <!-- ìºë¦­í„° ë¦¬ìŠ¤íŠ¸ -->
        <h1>ìºë¦­í„° ë„ê°</h1>
        <div id="character-list">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
        
        <!-- ìºë¦­í„° ìƒì„¸ ë³´ê¸° -->
        <div id="character-detail">
            <div class="detail-header">
                <img id="detail-image" class="detail-image" src="#" alt="ìºë¦­í„° ì´ë¯¸ì§€" style="display:none;">
                <div class="detail-info">
                    <h2 id="detail-name" class="detail-name"></h2>
                    <div class="detail-meta">
                        <span id="detail-race"></span>
                        <span id="detail-gender"></span>
                        <span id="detail-birth"></span>
                        <span id="detail-height"></span>
                    </div>
                    <div class="detail-section">
                        <h3>ìŠ¹ë¬´ì› ì •ë³´</h3>
                        <div id="detail-traits"></div>
                    </div>
                </div>
            </div>
            
            <div class="detail-section">
                <h3>ë°°ê²½ ì´ì•¼ê¸°</h3>
                <div id="detail-backstories"></div>
            </div>
            
            <button onclick="backToList()" class="back-button">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </div>

    <script>
        // ìºë¦­í„° ë°ì´í„°
        let characters = [];
        let currentCharacterId = null;
        let draggedCard = null;
        let isEditMode = false;
        
        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ˆê¸°í™”
        function initDragAndDrop() {
            initCardDragAndDrop();
            initSectionDragAndDrop();
        }
        
        // ì„¹ì…˜ ì¶”ê°€
        function addSection(type) {
            const containerId = `${type}-sections`;
            const container = document.getElementById(containerId);
            const placeholder = type === 'trait' ? 'ìŠ¹ë¬´ì›ì˜ ì •ë³´ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”' : 'ìºë¦­í„°ì˜ ë°°ê²½ ì´ì•¼ê¸°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”';
            
            const newSection = document.createElement('div');
            newSection.className = 'input-section';
            newSection.draggable = true;
            newSection.innerHTML = `
                <textarea class="${type}-text" placeholder="${placeholder}"></textarea>
                <div class="section-controls">
                    <span class="section-handle">â‰¡</span>
                    <button type="button" class="remove-section-btn" onclick="removeSection(this, '${type}')">ì‚­ì œ</button>
                </div>
            `;
            
            if (container.firstChild) {
                container.insertBefore(newSection, container.firstChild);
            } else {
                container.appendChild(newSection);
            }
            
            initSectionDragAndDrop();
        }
        
        // ì„¹ì…˜ ì‚­ì œ
        function removeSection(button, type) {
            const container = document.getElementById(`${type}-sections`);
            const sections = container.querySelectorAll('.input-section');
            
            if (sections.length > 1) {
                button.closest('.input-section').remove();
            } else {
                alert(`ìµœì†Œ í•˜ë‚˜ì˜ ${type === 'trait' ? 'ì •ë³´' : 'ì´ì•¼ê¸°'} ì„¹ì…˜ì´ í•„ìš”í•©ë‹ˆë‹¤.`);
            }
        }
        
        // ìºë¦­í„° ì €ì¥
        function saveCharacter(event) {
            event.preventDefault();
            
            const traits = Array.from(document.querySelectorAll('.trait-text'))
                .map(textarea => textarea.value.trim())
                .filter(text => text);
                
            const backstories = Array.from(document.querySelectorAll('.backstory-text'))
                .map(textarea => textarea.value.trim())
                .filter(text => text);
                
            if (traits.length === 0 || backstories.length === 0) {
                alert('ìµœì†Œ í•˜ë‚˜ì˜ ì •ë³´ì™€ ë°°ê²½ ì´ì•¼ê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }
            
            const characterId = document.getElementById('edit-id').value;
            let character;
            
            if (isEditMode && characterId) {
                // ê¸°ì¡´ ìºë¦­í„° ìˆ˜ì •
                character = characters.find(c => c.id === characterId);
                if (!character) return;
                
                character.name = document.getElementById('char-name').value;
                character.race = document.getElementById('char-race').value;
                character.birth = document.getElementById('char-birth').value;
                character.gender = document.getElementById('char-gender').value;
                character.height = document.getElementById('char-height').value;
                character.traits = traits;
                character.backstories = backstories;
                
                // ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
                const imageFile = document.getElementById('char-image').files[0];
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        character.image = e.target.result;
                        finishSave(character);
                    }
                    reader.readAsDataURL(imageFile);
                    return;
                }
            } else {
                // ìƒˆ ìºë¦­í„° ì¶”ê°€
                character = {
                    id: Date.now().toString(),
                    name: document.getElementById('char-name').value,
                    race: document.getElementById('char-race').value,
                    birth: document.getElementById('char-birth').value,
                    gender: document.getElementById('char-gender').value,
                    height: document.getElementById('char-height').value,
                    traits: traits,
                    backstories: backstories,
                    image: null,
                    order: characters.length
                };
                
                // ì´ë¯¸ì§€ ì²˜ë¦¬
                const imageFile = document.getElementById('char-image').files[0];
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        character.image = e.target.result;
                        finishSave(character);
                    }
                    reader.readAsDataURL(imageFile);
                    return;
                }
            }
            
            finishSave(character);
        }
        
        function finishSave(character) {
            if (isEditMode) {
                cancelEdit();
            } else {
                characters.push(character);
            }
            
            renderCharacterList();
            resetForm();
        }
        
        // ìºë¦­í„° ìˆ˜ì • ì‹œì‘
        function startEditCharacter(id) {
            const character = characters.find(c => c.id === id);
            if (!character) return;
            
            isEditMode = true;
            currentCharacterId = id;
            
            // í¼ ì±„ìš°ê¸°
            document.getElementById('edit-id').value = character.id;
            document.getElementById('char-name').value = character.name;
            document.getElementById('char-race').value = character.race;
            document.getElementById('char-birth').value = character.birth;
            document.getElementById('char-gender').value = character.gender;
            document.getElementById('char-height').value = character.height;
            
            // íŠ¹ì§• ì„¹ì…˜ ì±„ìš°ê¸°
            const traitContainer = document.getElementById('trait-sections');
            traitContainer.innerHTML = '';
            character.traits.forEach(trait => {
                const section = document.createElement('div');
                section.className = 'input-section';
                section.draggable = true;
                section.innerHTML = `
                    <textarea class="trait-text">${trait}</textarea>
                    <div class="section-controls">
                        <span class="section-handle">â‰¡</span>
                        <button type="button" class="remove-section-btn" onclick="removeSection(this, 'trait')">ì‚­ì œ</button>
                    </div>
                `;
                traitContainer.appendChild(section);
            });
            
            // ë°°ê²½ ì´ì•¼ê¸° ì„¹ì…˜ ì±„ìš°ê¸°
            const backstoryContainer = document.getElementById('backstory-sections');
            backstoryContainer.innerHTML = '';
            character.backstories.forEach(story => {
                const section = document.createElement('div');
                section.className = 'input-section';
                section.draggable = true;
                section.innerHTML = `
                    <textarea class="backstory-text">${story}</textarea>
                    <div class="section-controls">
                        <span class="section-handle">â‰¡</span>
                        <button type="button" class="remove-section-btn" onclick="removeSection(this, 'backstory')">ì‚­ì œ</button>
                    </div>
                `;
                backstoryContainer.appendChild(section);
            });
            
            // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
            const imagePreview = document.getElementById('image-preview');
            imagePreview.innerHTML = '';
            if (character.image) {
                imagePreview.innerHTML = `<img src="${character.image}" style="max-width: 200px; max-height: 200px; margin-top: 10px;">`;
            }
            
            // ë²„íŠ¼ ìƒíƒœ ë³€ê²½
            document.getElementById('save-btn').textContent = 'ìˆ˜ì • ì™„ë£Œ';
            document.getElementById('cancel-edit').classList.remove('edit-mode-hidden');
            
            // ì…ë ¥ í¼ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            document.getElementById('input-form').scrollIntoView({ behavior: 'smooth' });
        }
        
        // ìˆ˜ì • ì·¨ì†Œ
        function cancelEdit() {
            isEditMode = false;
            currentCharacterId = null;
            document.getElementById('edit-id').value = '';
            document.getElementById('save-btn').textContent = 'ìºë¦­í„° ì €ì¥';
            document.getElementById('cancel-edit').classList.add('edit-mode-hidden');
            resetForm();
        }
        
        // ìºë¦­í„° ì‚­ì œ
        function deleteCharacter(id) {
            if (!confirm('ì •ë§ë¡œ ì´ ìºë¦­í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            characters = characters.filter(c => c.id !== id);
            renderCharacterList();
            
            if (currentCharacterId === id) {
                backToList();
            }
        }
        
        // í¼ ì´ˆê¸°í™”
        function resetForm() {
            document.getElementById('character-form').reset();
            document.getElementById('image-preview').innerHTML = '';
            
            // ì„¹ì…˜ ì´ˆê¸°í™”
            document.getElementById('trait-sections').innerHTML = `
                <div class="input-section" draggable="true">
                    <textarea class="trait-text" placeholder="ìŠ¹ë¬´ì›ì˜ ì •ë³´ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
                    <div class="section-controls">
                        <span class="section-handle">â‰¡</span>
                        <button type="button" class="remove-section-btn" onclick="removeSection(this, 'trait')">ì‚­ì œ</button>
                    </div>
                </div>
            `;
            
            document.getElementById('backstory-sections').innerHTML = `
                <div class="input-section" draggable="true">
                    <textarea class="backstory-text" placeholder="ìºë¦­í„°ì˜ ë°°ê²½ ì´ì•¼ê¸°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
                    <div class="section-controls">
                        <span class="section-handle">â‰¡</span>
                        <button type="button" class="remove-section-btn" onclick="removeSection(this, 'backstory')">ì‚­ì œ</button>
                    </div>
                </div>
            `;
            
            initSectionDragAndDrop();
        }
        
        // ìºë¦­í„° ëª©ë¡ ë Œë”ë§
        function renderCharacterList() {
            const container = document.getElementById('character-list');
            container.innerHTML = '';
            
            characters.forEach(character => {
                const card = document.createElement('div');
                card.className = 'character-card';
                card.draggable = true;
                card.dataset.id = character.id;
                
                card.innerHTML = `
                    ${character.image ? 
                        `<img src="${character.image}" class="card-image" alt="${character.name}">` : 
                        '<div class="no-image">ì´ë¯¸ì§€ ì—†ìŒ</div>'
                    }
                    <div class="card-actions">
                        <div class="card-handle">â‰¡</div>
                        <div class="action-btn edit-btn" onclick="event.stopPropagation(); startEditCharacter('${character.id}')">âœï¸</div>
                        <div class="action-btn delete-btn" onclick="event.stopPropagation(); deleteCharacter('${character.id}')">ğŸ—‘ï¸</div>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">${character.name}</h3>
                        <div class="card-meta">
                            ${getRaceName(character.race)} Â· ${getGenderName(character.gender)} 
                            ${character.birth ? 'Â· ' + character.birth : ''}
                        </div>
                        <p class="card-desc">${character.traits[0] || 'ì •ë³´ ì—†ìŒ'}</p>
                    </div>
                `;
                
                card.addEventListener('click', () => showCharacterDetail(character.id));
                container.appendChild(card);
            });
            
            initCardDragAndDrop();
            updateCharacterOrder();
        }
        
        // ìƒì„¸ ë³´ê¸°
        function showCharacterDetail(id) {
            const character = characters.find(c => c.id === id);
            if (!character) return;
            
            currentCharacterId = id;
            document.getElementById('input-form').style.display = 'none';
            document.getElementById('character-list').style.display = 'none';
            document.getElementById('character-detail').style.display = 'block';
            
            // ìƒì„¸ ì •ë³´ ì±„ìš°ê¸°
            document.getElementById('detail-name').textContent = character.name;
            document.getElementById('detail-race').textContent = getRaceName(character.race);
            document.getElementById('detail-gender').textContent = getGenderName(character.gender);
            document.getElementById('detail-birth').textContent = character.birth || 'ìƒì¼ ë¯¸ì •';
            document.getElementById('detail-height').textContent = character.height || 'í‚¤ ì •ë³´ ì—†ìŒ';
            
            // ì´ë¯¸ì§€ í‘œì‹œ
            const imgElement = document.getElementById('detail-image');
            if (character.image) {
                imgElement.src = character.image;
                imgElement.style.display = 'block';
            } else {
                imgElement.style.display = 'none';
            }
            
            // íŠ¹ì§• í‘œì‹œ
            const traitsContainer = document.getElementById('detail-traits');
            traitsContainer.innerHTML = character.traits.map((trait, i) => `
                <div class="detail-item">
                    <h4>ì •ë³´ ${i+1}</h4>
                    <p>${trait}</p>
                </div>
            `).join('');
            
            // ë°°ê²½ ì´ì•¼ê¸° í‘œì‹œ
            const storiesContainer = document.getElementById('detail-backstories');
            storiesContainer.innerHTML = character.backstories.map((story, i) => `
                <div class="detail-item">
                    <h4>ì´ì•¼ê¸° ${i+1}</h4>
                    <p>${story}</p>
                </div>
            `).join('');
        }
        
        // ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function backToList() {
            document.getElementById('input-form').style.display = 'block';
            document.getElementById('character-list').style.display = 'grid';
            document.getElementById('character-detail').style.display = 'none';
            currentCharacterId = null;
        }
        
        // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        function exportData() {
            const data = {
                characters: characters,
                exportedAt: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `characters_${new Date().toISOString().slice(0,10)}.json`;
            a.click();
            
            URL.revokeObjectURL(url);
        }
        
        // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const data = JSON.parse(event.target.result);
                        if (Array.isArray(data.characters)) {
                            characters = data.characters;
                            renderCharacterList();
                            alert('ìºë¦­í„° ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì„±ê³µ!');
                        } else {
                            alert('ì˜ëª»ëœ ë°ì´í„° í˜•ì‹ì…ë‹ˆë‹¤.');
                        }
                    } catch (error) {
                        alert('ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜: ' + error.message);
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // ì½ê¸° ì „ìš©ìš© ì €ì¥
        function saveForReadOnly() {
  const data = {
    characters: characters,
    savedAt: new Date().toISOString()
  };
  
  // JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°
  const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  
  const a = document.createElement('a');
  a.href = url;
  a.download = 'character_data.json';
  a.click();
  
  alert('ì½ê¸° ì „ìš© ë°°í¬ìš© ë°ì´í„° íŒŒì¼ ìƒì„± ì™„ë£Œ! ì´ íŒŒì¼ì„ ì›¹ì‚¬ì´íŠ¸ì— ì—…ë¡œë“œí•˜ì„¸ìš”.');
}
        
        // ì¢…ì¡± ì´ë¦„ ë³€í™˜
        function getRaceName(race) {
            const races = {
                'human': 'ì¸ê°„',
                'machine': 'ê¸°ê³„',
                'nonhuman': 'ì¸ì™¸'
            };
            return races[race] || race || 'ë¯¸ì •';
        }
        
        // ì„±ë³„ ì´ë¦„ ë³€í™˜
        function getGenderName(gender) {
            const genders = {
                'male': 'ë‚¨ì„±',
                'female': 'ì—¬ì„±',
                'other': 'ê¸°íƒ€',
                'unknown': 'ë¯¸ì •'
            };
            return genders[gender] || gender || 'ë¯¸ì •';
        }
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initDragAndDrop();
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë°ì´í„° í™•ì¸
            const saved = localStorage.getItem('characterData');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    if (Array.isArray(data.characters)) {
                        characters = data.characters;
                        renderCharacterList();
                    }
                } catch (e) {
                    console.error('ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', e);
                }
            }
        });

        /* ===== ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê´€ë ¨ í•¨ìˆ˜ë“¤ ===== */
        function initCardDragAndDrop() {
            const cards = document.querySelectorAll('.character-card');
            
            cards.forEach(card => {
                const handle = card.querySelector('.card-handle');
                
                handle.addEventListener('mousedown', function(e) {
                    e.stopPropagation();
                });
                
                card.addEventListener('dragstart', function() {
                    draggedCard = this;
                    setTimeout(() => this.classList.add('dragging'), 0);
                });
                
                card.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                    draggedCard = null;
                    updateCharacterOrder();
                });
            });
            
            document.getElementById('character-list').addEventListener('dragover', function(e) {
                e.preventDefault();
                if (!draggedCard) return;
                
                const afterElement = getDragAfterElement(this, e.clientY);
                if (afterElement) {
                    this.insertBefore(draggedCard, afterElement);
                } else {
                    this.appendChild(draggedCard);
                }
            });
        }
        
        function initSectionDragAndDrop() {
            document.querySelectorAll('.input-section').forEach(section => {
                const handle = section.querySelector('.section-handle');
                
                handle.addEventListener('mousedown', function(e) {
                    e.stopPropagation();
                });
                
                section.addEventListener('dragstart', function() {
                    this.classList.add('dragging');
                });
                
                section.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
            });
            
            document.querySelectorAll('#trait-sections, #backstory-sections').forEach(container => {
                container.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    const dragging = document.querySelector('.input-section.dragging');
                    if (!dragging) return;
                    
                    const afterElement = getDragAfterElement(this, e.clientY);
                    if (afterElement) {
                        this.insertBefore(dragging, afterElement);
                    } else {
                        this.appendChild(dragging);
                    }
                });
            });
        }
        
        function getDragAfterElement(container, y) {
            const elements = [...container.querySelectorAll('.character-card:not(.dragging), .input-section:not(.dragging)')];
            
            return elements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }
        
        function updateCharacterOrder() {
            const container = document.getElementById('character-list');
            const cards = container.querySelectorAll('.character-card');
            
            cards.forEach((card, index) => {
                const id = card.dataset.id;
                const character = characters.find(c => c.id === id);
                if (character) character.order = index;
            });
            
            characters.sort((a, b) => a.order - b.order);
        }
    </script>
</body>
</html>

      


<!-- CSS ìŠ¤íƒ€ì¼ -->
<style>
  .calculator-container {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    max-width: 500px;
    margin: 0 auto;
  }
  
  .input-group {
    margin-bottom: 20px;
    display: flex;
    align-items: center;
  }
  
  .input-group label {
    width: 120px;
    font-weight: bold;
  }

  /* ìºë¦­í„° ì •ë³´ */
  .character-card:hover { 
    transform: translateY(-5px); 
    box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
}
.card-image { 
    width: 100%; 
    height: 250px; 
    object-fit: cover; 
    object-position: top center; 
}
.card-body { 
    padding: 15px; 
}
.card-title { 
    font-size: 18px; 
    margin-bottom: 5px; 
    color: #2c3e50; 
}
.card-meta { 
    font-size: 14px; 
    color: #7f8c8d; 
    margin-bottom: 10px; 
}
.card-desc {
    display: -webkit-box;
    display: -moz-box;
    display: box;
    -webkit-line-clamp: 3;
    -moz-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.4;
    max-height: 4.2em;
}

  
  /* ê²°ê³¼ ì˜ì—­ ìŠ¤íƒ€ì¼ */
  .result-section {
    margin-top: 20px;
    padding: 15px;
    background-color: #f9f9f9;
    border-radius: 5px;
  }
  
  .result-item {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
  }
</style>

<!-- JavaScript ê¸°ëŠ¥ -->
<script>
  // ìˆ«ì ì¦ê°€/ê°ì†Œ ë²„íŠ¼ ë™ì‘
  document.querySelectorAll('.increase-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      const input = e.target.closest('.number-control').querySelector('.number-input');
      input.stepUp();
      validateInputs();
    });
  });
  
  document.querySelectorAll('.decrease-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      const input = e.target.closest('.number-control').querySelector('.number-input');
      input.stepDown();
      validateInputs();
    });
  });
  
  // ì§ì ‘ ì…ë ¥ ì‹œ ìœ íš¨ì„± ê²€ì‚¬
  document.querySelectorAll('.number-input').forEach(input => {
    input.addEventListener('input', validateInputs);
  });
  
  // í˜„ì¬ ë‹¨ê³„ < ëª©í‘œ ë‹¨ê³„ ê²€ì‚¬
  function validateInputs() {
    const current = parseInt(document.getElementById('current-level').value);
    const target = parseInt(document.getElementById('target-level').value);
    
    if (current >= target) {
      document.getElementById('target-level').value = current + 1;
    }
  }
  
  // ê³„ì‚° ë¡œì§
  document.getElementById('calculate-btn').addEventListener('click', function() {
    const current = parseInt(document.getElementById('current-level').value);
    const target = parseInt(document.getElementById('target-level').value);
    const itemType = document.getElementById('item-type').value;
    
    // ì„ì‹œ ê³„ì‚°ì‹ (ì‹¤ì œ ê²Œì„ ë°ì´í„°ë¡œ êµì²´ í•„ìš”)
    const materials = (target - current) * 5;
    const cost = (target - current) * 1000;
    const successRate = 80 - (target * 3);
    
    // ê²°ê³¼ í‘œì‹œ
    document.getElementById('material-result').textContent = `${materials}ê°œ`;
    document.getElementById('cost-result').textContent = `${cost.toLocaleString()}ê³¨ë“œ`;
    document.getElementById('success-rate').textContent = `${Math.max(5, successRate)}%`;
    
    // ê²°ê³¼ ì˜ì—­ ë³´ì´ê¸°
    document.getElementById('result-section').style.display = 'block';
  });
</script>
  

  <script>
    // í˜ì´ì§€ ì „í™˜ ê¸°ëŠ¥
    document.querySelectorAll('.sidebar-menu li').forEach(menuItem => {
      menuItem.addEventListener('click', function() {
        document.querySelectorAll('.sidebar-menu li').forEach(item => {
          item.classList.remove('active');
        });
        document.querySelectorAll('.page').forEach(page => {
          page.classList.remove('active');
        });
        this.classList.add('active');
        const pageId = this.getAttribute('data-page');
        document.getElementById(pageId).classList.add('active');
      });
    });

    // ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„
    const searchInput = document.getElementById('item-search');
    const priceTableBody = document.getElementById('price-table-body');
    const tableRows = priceTableBody.querySelectorAll('tr');
    const noResultsMessage = document.querySelector('.no-results');

    searchInput.addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      let hasResults = false;

      tableRows.forEach(row => {
        const itemName = row.cells[0].textContent.toLowerCase();
        if (itemName.includes(searchTerm)) {
          row.style.display = '';
          hasResults = true;
        } else {
          row.style.display = 'none';
        }
      });

      // ê²€ìƒ‰ ê²°ê³¼ ì—†ì„ ë•Œ ë©”ì‹œì§€ í‘œì‹œ
      noResultsMessage.style.display = hasResults ? 'none' : 'block';
    });
  </script>

<script>
// ê°œë°œ ë²„ì „ì˜ saveForReadOnly í•¨ìˆ˜ ìˆ˜ì •
function saveForReadOnly() {
  const data = {
    characters: characters,
    savedAt: new Date().toISOString()
  };
  
  // JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°
  const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  
  const a = document.createElement('a');
  a.href = url;
  a.download = 'character_data.json';
  a.click();
  
  alert('ì½ê¸° ì „ìš© ë°°í¬ìš© ë°ì´í„° íŒŒì¼ ìƒì„± ì™„ë£Œ! ì´ íŒŒì¼ì„ ì›¹ì‚¬ì´íŠ¸ì— ì—…ë¡œë“œí•˜ì„¸ìš”.');
}
</script>

</body>
</html>